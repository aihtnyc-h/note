포인트 입력시 요금을 기반으로 가격 및 할인 계산

`function updatePoint() {  
// 포인트 입력 필드와 관련된 요소들 가져오기  
const pointInput = document.getElementById("pointDataInput");  
const pointLabel = document.getElementById("mPointLabel");  
const discountLabel = document.getElementById("discountLabel");  
const priceInput = document.getElementById("priceData");  
const socInput = document.getElementById("socData");  
const stationFeeInput = Number(document.getElementById("stationFee").value); // 입력된 스테이션 요금 가져오기  
const userPointElement = document.getElementById('userPoint');  
const userPointText = userPointElement.innerText.trim(); // 공백 제거  
const userPoint = parseFloat(userPointText.replace(/,/g, '')) || 0; // 콤마 제거 후 숫자로 변환  
  
// 입력된 포인트와 사용자 보유 포인트 중 최소값 선택  
const enteredPoint = Math.min(parseFloat(pointInput.value) || 0, userPoint);  
  
const totalPriceLabel = document.getElementById("totalPriceLabel");  
  
// 가격 관련 값 초기화  
let totalPriceValue = 0; // 총 가격 기본값  
let priceValue = Number(priceInput.value) || 0; // 입력된 가격 가져오기  
const socValue = Number(socInput.value) || 0; // 소셜 입력값 가져오기  
let kwValue = socValue * stationFeeInput; // KW 계산: 소셜 입력값 * 스테이션 요금  
  
let discountValue = Math.floor(-kwValue * 0.1); // 기본 할인 값 설정 (KW의 10%)let mPointValue = -enteredPoint; // 입력된 포인트 값 (마이너스 처리)  
let total = priceValue + mPointValue; // 총 가격 계산  
let kwTotal = kwValue + mPointValue; // KW 총 가격 계산  
  
// 가격이 0일 경우 처리  
if (priceValue === 0) {  
if (kwTotal === 0) {  
totalPriceValue = kwTotal; // 총 가격 설정  
discountValue = 0; // 할인 값 0으로 설정  
} else {  
discountValue = Math.floor(-kwTotal * 0.1); // 소셜 입력값의 10% 할인 계산  
totalPriceValue = kwValue + discountValue + mPointValue; // 할인 적용  
}  
} else {  
// 가격이 있는 경우 처리  
if (total <= 0) {  
discountValue = 0; // 할인 값이 전체 가격을 초과할 경우 전체 가격을 할인으로 설정  
totalPriceValue = priceValue + mPointValue; // 할인 없이 총 가격 계산  
} else {  
discountValue = Math.floor(-total * 0.1); // 소셜 입력값의 10% 할인 계산  
totalPriceValue = priceValue + discountValue + mPointValue; // 할인 적용  
}  
}  
  
// 레이블 업데이트  
pointLabel.textContent = (-enteredPoint).toLocaleString(); // 포인트 레이블 업데이트  
discountLabel.textContent = discountValue.toLocaleString(); // 할인 레이블 업데이트  
totalPriceLabel.textContent = totalPriceValue.toLocaleString(); // 총 가격에 콤마 추가  
  
// 유효성 검사 호출  
check();  
}`


금액 입력시 요금을 기반으로 가격 및 할인 계산
`function updatePrice() {  
// 가격 관련 요소들 가져오기  
const priceInput = document.getElementById("priceData");  
const priceLabel = document.getElementById("priceValueLabel");  
const discountLabel = document.getElementById("discountLabel");  
const totalPriceLabel = document.getElementById("totalPriceLabel");  
const mPointLabel = document.getElementById("mPointLabel");  
const socInput = document.getElementById("socData");  
const stationFeeInput = Number(document.getElementById("stationFee").value); // 입력된 스테이션 요금 가져오기  
  
// 입력된 숫자를 가져옴  
let priceValue = Number(priceInput.value) || 0; // 입력된 가격을 숫자로 변환  
const socValue = Number(socInput.value) || 0; // 소셜 입력값 가져오기  
let discountValue = 0; // 할인 기본값 설정  
let totalPriceValue = 0; // 총 가격 기본값 설정  
  
// 가격에 콤마 추가하여 레이블에 표시  
priceLabel.textContent = priceValue.toLocaleString();  
  
// KW 계산: 소셜 입력값 * 스테이션 요금  
let kwValue = socValue * stationFeeInput;  
  
// M 포인트 값 가져오기  
let mPointValue = Number(mPointLabel.textContent.replace(/,/g, '')) || 0; // 콤마 제거 후 숫자로 변환  
let total = priceValue + mPointValue; // 총 가격 계산  
let kwTotal = kwValue + mPointValue; // KW 총 가격 계산  
  
// 가격이 0일 경우 처리  
if (priceValue === 0) {  
if (kwTotal === 0) {  
totalPriceValue = kwTotal; // 총 가격 설정  
discountValue = 0; // 할인 값을 0으로 설정  
} else {  
discountValue = Math.floor(-kwTotal * 0.1); // 소셜 입력값의 10% 할인 계산  
totalPriceValue = kwValue + discountValue + mPointValue; // 할인 적용  
}  
} else {  
// 가격이 있는 경우 처리  
if (total === 0) {  
discountValue = 0; // 할인 값이 전체 가격을 초과할 경우 전체 가격을 할인으로 설정  
totalPriceValue = priceValue + mPointValue; // 할인 없이 총 가격 계산  
} else {  
discountValue = Math.floor(-total * 0.1); // 소셜 입력값의 10% 할인 계산  
totalPriceValue = priceValue + discountValue + mPointValue; // 할인 적용  
}  
}  
  
// 총 가격에 콤마 추가하여 레이블 업데이트  
totalPriceLabel.textContent = totalPriceValue.toLocaleString();  
discountLabel.textContent = discountValue.toLocaleString(); // 할인 레이블 업데이트  
  
// 유효성 검사 호출  
check();  
}`

사용자가 포인트 체크박스를 선택하거나 해제할 때 포인트 입력 필드와 관련 레이블 업데이트
`function toggleUserPoint() {  
// 포인트 체크박스와 관련된 요소들 가져오기  
const pointCheckbox = document.getElementById("pointCheckbox");  
const userPointElement = document.getElementById("userPoint");  
const pointInput = document.getElementById("pointDataInput");  
const mPointLabel = document.getElementById("mPointLabel");  
const priceInput = document.getElementById("priceData");  
const socInput = document.getElementById("socData");  
const stationFeeInput = Number(document.getElementById("stationFee").value); // 스테이션 요금 가져오기  
  
// 입력된 가격과 소셜 값 가져오기  
let priceValue = Number(priceInput.value) || 0; // 가격 숫자로 변환  
let socValue = Number(socInput.value) || 0; // 소셜 입력값 숫자로 변환  
let kwValue = socValue * stationFeeInput; // KW 계산: 소셜 입력값 * 스테이션 요금  
  
// 유저 포인트 요소가 존재하는지 확인  
if (!userPointElement) {  
console.error("포인트가 존재하지 않습니다."); // 에러 로그 출력  
return; // 함수 종료  
}  
  
// 유저 포인트 값을 가져오기  
const userPoint = Number(userPointElement.innerText.replace(/,/g, '')); // 콤마 제거 후 숫자로 변환  
  
// 체크박스가 선택된 경우  
if (pointCheckbox.checked) {  
let pointToSet; // 설정할 포인트 값 초기화  
// 가격이 있는 경우와 없는 경우에 따라 포인트 설정  
if (priceValue > 0) {  
pointToSet = Math.min(userPoint, priceValue); // 유저 포인트와 가격 중 최소값 선택  
} else {  
pointToSet = Math.min(userPoint, kwValue); // 유저 포인트와 KW 중 최소값 선택  
}  
  
// 포인트 입력 필드와 레이블 업데이트  
pointInput.value = pointToSet; // 포인트 입력 필드에 값 설정  
mPointLabel.textContent = pointToSet === 0 ? '0' : `-${pointToSet} P`; // 레이블 업데이트  
updatePoint(); // 포인트 업데이트 함수 호출  
} else {  
// 체크박스가 선택되지 않은 경우  
pointInput.value = ''; // 포인트 입력 필드 비우기  
mPointLabel.textContent = '0 P'; // 레이블을 0으로 설정  
clearPoint(); // 포인트 초기화 함수 호출  
}  
}`

충전량 입력값과 스테이션 요금을 기반으로 가격 및 할인 계산
`function updateSoc() {  
// 소셜 입력 필드와 스테이션 요금 가져오기  
const socDataInput = document.getElementById("socData").value; // 입력된 소셜 값 가져오기  
const stationFeeInput = document.getElementById("stationFee").value; // 입력된 스테이션 요금 가져오기  
const priceValueLabel = document.getElementById("priceValueLabel"); // 가격 레이블 요소  
const discountLabel = document.getElementById("discountLabel"); // 할인 레이블 요소  
const totalPriceLabel = document.getElementById("totalPriceLabel"); // 총 가격 레이블 요소  
  
// 입력값이 비어있지 않다면 숫자로 변환 (NaN 방지)  
const socData = Number(socDataInput) || 0; // 소셜 값 변환  
const stationFee = Number(stationFeeInput) || 0; // 스테이션 요금 변환  
  
// kWhPrice 계산: 소셜 입력값 * 스테이션 요금  
let kWhPrice = Math.round(socData * stationFee); // 소셜 값과 요금을 곱하고 반올림  
  
// 가격 레이블에 kWhPrice를 포맷팅하여 설정  
priceValueLabel.textContent = kWhPrice.toLocaleString(); // 가격에 콤마 추가  
  
// 할인 값 계산 (10%) 및 소수점 아래 절삭  
let discountValue = Math.floor(-kWhPrice * 0.1); // kWhPrice의 10%를 계산하고 내림  
  
// 할인 레이블에 포맷팅하여 설정  
discountLabel.textContent = discountValue.toLocaleString(); // 할인에 콤마 추가  
  
// 총 가격 계산: kWhPrice + discountValue  
let totalPriceValue = kWhPrice + discountValue; // 총 가격 계산  
  
// 총 가격 레이블에 포맷팅하여 설정  
totalPriceLabel.textContent = totalPriceValue.toLocaleString(); // 총 가격에 콤마 추가  
}`

